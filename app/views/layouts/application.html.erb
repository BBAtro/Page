<!DOCTYPE html>
<html
  x-data="{ darkMode: localStorage.getItem('dark') === 'true'} "
  x-init="$watch('darkMode', val => localStorage.setItem('dark', val))"
  x-bind:class="{ 'dark': darkMode }"
>
  <head>
    <%= favicon_link_tag asset_path('favicon.jpeg') %>
    
    <title>
      <%= full_title(yield(:page_title))%>
    </title>

    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag "application" %>
    <%= javascript_include_tag "application", "data-turbo-track": "reload", defer: true %>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  </head>
  
    <body class="relative bg-slate-50 dark:bg-zinc-900">
      
      <button @click="darkMode = !darkMode" class="fixed border rounded-xl m-5 h-14 w-14 bg-white dark:bg-zinc-800 dark:text-white dark:border-zinc-800 shadow-xl">
        <%= image_tag("moon.png", :alt => "rss feed", class: "m-2 h-10 w-10")%>
      </button>
    
      <%= render 'main/header', class: "z-50" %>
      
      <div class="relative flex z-0 p-1 mt-6">
        <%= yield :nbar %>
      
        <main class="container border rounded-xl mx-auto order-2 w-6/12 p-2 h-max bg-white dark:bg-zinc-800 dark:border-zinc-800 dark:text-white shadow-xl">
            <%= yield %>
        </main>

        <%= render 'main/aside' %>
      </div>

      <%# <script src="//unpkg.com/alpinejs" defer></script> %>
    </body>
</html>
